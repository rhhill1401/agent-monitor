(()=>{var e={};e.id=821,e.ids=[821],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},9436:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=n(7096),s=n(6132),i=n(7284),o=n.n(i),a=n(2564),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);n.d(t,l);let d=["",{children:["rules",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,1343)),"/Users/Killmunger/clawd/apps/agent-monitor/app/rules/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,8489)),"/Users/Killmunger/clawd/apps/agent-monitor/app/layout.js"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/Killmunger/clawd/apps/agent-monitor/app/rules/page.js"],u="/rules/page",p={require:n,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/rules/page",pathname:"/rules",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9023:(e,t,n)=>{Promise.resolve().then(n.bind(n,6276))},6276:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>RulesPage});var r=n(784),s=n(9885);let i={forbidden:{label:"\uD83D\uDEAB FORBIDDEN",color:"#f85149"},posting:{label:"\uD83D\uDCCB Posting Rules",color:"#d29922"},qa:{label:"✅ QA Checklist",color:"#3fb950"}};function RulesPage(){let[e,t]=(0,s.useState)([]),[n,o]=(0,s.useState)(!0),[a,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)(null),[u,p]=(0,s.useState)(""),[x,g]=(0,s.useState)("active"),[h,m]=(0,s.useState)({text:"",category:"posting",status:"active"});(0,s.useEffect)(()=>{fetchRules()},[]);let fetchRules=async()=>{try{let e=await fetch("/api/rules"),n=await e.json();t(n.rules||[])}catch(e){console.error("Failed to fetch rules:",e)}o(!1)},addRule=async()=>{if(h.text.trim())try{let e=await fetch("/api/rules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});e.ok&&(m({text:"",category:"posting",status:"active"}),l(!1),fetchRules())}catch(e){console.error("Failed to add rule:",e)}},startEdit=e=>{c(e.id),p(e.text),g(e.status)},saveEdit=async e=>{try{await fetch("/api/rules",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,text:u,status:x})}),c(null),fetchRules()}catch(e){console.error("Failed to update rule:",e)}},deleteRule=async e=>{if(confirm("Delete this rule?"))try{await fetch(`/api/rules?id=${e}`,{method:"DELETE"}),fetchRules()}catch(e){console.error("Failed to delete rule:",e)}},b={container:{background:"#0d1117",minHeight:"100vh",color:"#c9d1d9",padding:"20px",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},title:{fontSize:"28px",color:"#58a6ff"},addBtn:{background:"#238636",color:"#fff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600"},section:{marginBottom:"40px"},sectionTitle:{fontSize:"22px",marginBottom:"15px"},card:{background:"#161b22",borderRadius:"12px",border:"1px solid #30363d"},ruleRow:{padding:"15px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #21262d"},ruleText:{flex:1,fontSize:"15px",marginRight:"15px"},status:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",marginRight:"15px",cursor:"pointer"},actions:{display:"flex",gap:"8px"},btn:{background:"#30363d",color:"#c9d1d9",border:"none",padding:"8px 14px",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},deleteBtn:{background:"#f8514930",color:"#f85149"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modalContent:{background:"#161b22",padding:"30px",borderRadius:"16px",width:"500px",maxWidth:"90%",border:"1px solid #30363d"},input:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #30363d",background:"#0d1117",color:"#c9d1d9",fontSize:"15px",marginBottom:"15px",boxSizing:"border-box"},select:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #30363d",background:"#0d1117",color:"#c9d1d9",fontSize:"15px",marginBottom:"15px"},backLink:{color:"#58a6ff",textDecoration:"none",marginBottom:"20px",display:"inline-block"}};return n?r.jsx("div",{style:b.container,children:r.jsx("p",{children:"Loading rules from server..."})}):(0,r.jsxs)("div",{style:b.container,children:[r.jsx("a",{href:"/",style:b.backLink,children:"← Back to Dashboard"}),(0,r.jsxs)("div",{style:b.header,children:[r.jsx("h1",{style:b.title,children:"\uD83D\uDC19 QA Rules & Guidelines"}),r.jsx("button",{style:b.addBtn,onClick:()=>l(!0),children:"+ Add Rule"})]}),r.jsx("p",{style:{color:"#8b949e",marginBottom:"20px"},children:"✅ Rules stored on server (persistent). Click status badge to toggle ACTIVE/PENDING."}),Object.entries(i).map(([t,n])=>{let s=e.filter(e=>e.category===t);return 0===s.length?null:(0,r.jsxs)("div",{style:b.section,children:[r.jsx("h2",{style:{...b.sectionTitle,color:n.color},children:n.label}),r.jsx("div",{style:{...b.card,borderColor:n.color,borderWidth:"forbidden"===t?"2px":"1px"},children:s.map((e,t)=>(0,r.jsxs)("div",{style:{...b.ruleRow,borderBottom:t===s.length-1?"none":"1px solid #21262d"},children:[d===e.id?(0,r.jsxs)(r.Fragment,{children:[r.jsx("input",{style:{...b.input,marginBottom:0,flex:1,marginRight:"10px"},value:u,onChange:e=>p(e.target.value),onKeyDown:t=>"Enter"===t.key&&saveEdit(e.id),autoFocus:!0}),(0,r.jsxs)("select",{style:{...b.select,width:"auto",marginBottom:0,marginRight:"10px"},value:x,onChange:e=>g(e.target.value),children:[r.jsx("option",{value:"active",children:"ACTIVE"}),r.jsx("option",{value:"pending",children:"PENDING"})]})]}):r.jsx("span",{style:b.ruleText,children:e.text}),d!==e.id&&r.jsx("span",{style:{...b.status,background:"active"===e.status?"#23863630":"#d2992230",color:"active"===e.status?"#3fb950":"#d29922"},onClick:async()=>{await fetch("/api/rules",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,status:"active"===e.status?"pending":"active"})}),fetchRules()},title:"Click to toggle status",children:"active"===e.status?"ACTIVE":"PENDING"}),r.jsx("div",{style:b.actions,children:d===e.id?(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{style:{...b.btn,background:"#238636"},onClick:()=>saveEdit(e.id),children:"Save"}),r.jsx("button",{style:b.btn,onClick:()=>c(null),children:"Cancel"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{style:b.btn,onClick:()=>startEdit(e),children:"Edit"}),r.jsx("button",{style:{...b.btn,...b.deleteBtn},onClick:()=>deleteRule(e.id),children:"Delete"})]})})]},e.id))})]},t)}),a&&r.jsx("div",{style:b.modal,onClick:()=>l(!1),children:(0,r.jsxs)("div",{style:b.modalContent,onClick:e=>e.stopPropagation(),children:[r.jsx("h2",{style:{marginBottom:"20px",color:"#c9d1d9"},children:"Add New Rule"}),r.jsx("textarea",{style:{...b.input,minHeight:"100px",resize:"vertical"},placeholder:"Enter rule text...",value:h.text,onChange:e=>m({...h,text:e.target.value}),autoFocus:!0}),(0,r.jsxs)("select",{style:b.select,value:h.category,onChange:e=>m({...h,category:e.target.value}),children:[r.jsx("option",{value:"forbidden",children:"\uD83D\uDEAB Forbidden"}),r.jsx("option",{value:"posting",children:"\uD83D\uDCCB Posting Rule"}),r.jsx("option",{value:"qa",children:"✅ QA Checklist"})]}),(0,r.jsxs)("select",{style:b.select,value:h.status,onChange:e=>m({...h,status:e.target.value}),children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"pending",children:"Pending Implementation"})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[r.jsx("button",{style:b.addBtn,onClick:addRule,children:"Add Rule"}),r.jsx("button",{style:{...b.btn,padding:"12px 24px"},onClick:()=>l(!1),children:"Cancel"})]})]})})]})}},1343:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$$typeof:()=>o,__esModule:()=>i,default:()=>l});var r=n(5153);let s=(0,r.createProxy)(String.raw`/Users/Killmunger/clawd/apps/agent-monitor/app/rules/page.js`),{__esModule:i,$$typeof:o}=s,a=s.default,l=a},784:(e,t,n)=>{"use strict";e.exports=n(316).vendored["react-ssr"].ReactJsxRuntime}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),n=t.X(0,[472,180],()=>__webpack_exec__(9436));module.exports=n})();