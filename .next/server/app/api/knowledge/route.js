"use strict";(()=>{var e={};e.id=591,e.ids=[591],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},7205:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>m,originalPathname:()=>_,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>w,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>Z});var n={};r.r(n),r.d(n,{DELETE:()=>DELETE,GET:()=>GET,POST:()=>POST,dynamic:()=>u});var a=r(884),o=r(6132),s=r(5798),i=r(7862);let u="force-dynamic",d="franky:knowledge",c="franky:knowledge:list";async function GET(e){let{searchParams:t}=new URL(e.url),r=t.get("name");try{if(r){let e=await i.Z.get(`${d}:${r}`);if(e)return s.Z.json({name:r,content:e});return s.Z.json({name:r,content:null,error:"Document not found"})}let e=await i.Z.get(c)||[];return s.Z.json({docs:e})}catch(e){return console.error("Redis error:",e),s.Z.json({docs:[],error:"Redis error"})}}async function POST(e){try{let{name:t,content:r}=await e.json();if(!t||!r)return s.Z.json({error:"name and content required"},{status:400});await i.Z.set(`${d}:${t}`,r);let n=await i.Z.get(c)||[],a=n.findIndex(e=>e.name===t);return a>=0?n[a].updatedAt=new Date().toISOString():n.push({name:t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),await i.Z.set(c,n),s.Z.json({success:!0,name:t,message:"Document saved"})}catch(e){return console.error("Redis error:",e),s.Z.json({error:e.message},{status:500})}}async function DELETE(e){try{let{searchParams:t}=new URL(e.url),r=t.get("name");if(!r)return s.Z.json({error:"name required"},{status:400});await i.Z.del(`${d}:${r}`);let n=await i.Z.get(c)||[];return n=n.filter(e=>e.name!==r),await i.Z.set(c,n),s.Z.json({success:!0})}catch(e){return s.Z.json({error:e.message},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/knowledge/route",pathname:"/api/knowledge",filename:"route",bundlePath:"app/api/knowledge/route"},resolvedPagePath:"/Users/Killmunger/clawd/apps/agent-monitor/app/api/knowledge/route.js",nextConfigOutput:"",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:g,serverHooks:w,headerHooks:m,staticGenerationBailout:Z}=l,_="/api/knowledge/route"},7862:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(1634);let a=new n.s({url:process.env.KV_REST_API_URL,token:process.env.KV_REST_API_TOKEN}),o=a}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[997,634],()=>__webpack_exec__(7205));module.exports=r})();