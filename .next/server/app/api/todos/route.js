"use strict";(()=>{var e={};e.id=603,e.ids=[603],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},2658:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>Z,originalPathname:()=>w,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>m});var o={};r.r(o),r.d(o,{DELETE:()=>DELETE,GET:()=>GET,POST:()=>POST,PUT:()=>PUT,dynamic:()=>u});var s=r(884),n=r(6132),a=r(5798),i=r(7862);let u="force-dynamic",d="franky:todos";async function GET(){try{let e=await i.Z.get(d)||[];return a.Z.json({todos:e})}catch(e){return console.error("Redis error:",e),a.Z.json({todos:[],error:e.message})}}async function POST(e){try{let t=await e.json(),r=await i.Z.get(d)||[];if(t.text){let e={id:Date.now().toString(),text:t.text,completed:!1,priority:t.priority||"normal",createdAt:new Date().toISOString(),dueDate:t.dueDate||null,assignedAgent:t.assignedAgent||null};return r.unshift(e),await i.Z.set(d,r),a.Z.json({success:!0,todo:e})}if(t.todos&&Array.isArray(t.todos))return await i.Z.set(d,t.todos),a.Z.json({success:!0,todos:t.todos});return a.Z.json({error:"text required"},{status:400})}catch(e){return a.Z.json({error:e.message},{status:500})}}async function PUT(e){try{let{id:t,...r}=await e.json();if(!t)return a.Z.json({error:"id required"},{status:400});let o=await i.Z.get(d)||[],s=o.findIndex(e=>e.id===t);if(-1===s)return a.Z.json({error:"Todo not found"},{status:404});return o[s]={...o[s],...r},r.completed&&(o[s].completedAt=new Date().toISOString()),await i.Z.set(d,o),a.Z.json({success:!0,todo:o[s]})}catch(e){return a.Z.json({error:e.message},{status:500})}}async function DELETE(e){try{let{searchParams:t}=new URL(e.url),r=t.get("id");if(!r)return a.Z.json({error:"id required"},{status:400});let o=await i.Z.get(d)||[];return o=o.filter(e=>e.id!==r),await i.Z.set(d,o),a.Z.json({success:!0})}catch(e){return a.Z.json({error:e.message},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/todos/route",pathname:"/api/todos",filename:"route",bundlePath:"app/api/todos/route"},resolvedPagePath:"/Users/Killmunger/clawd/apps/agent-monitor/app/api/todos/route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:g,headerHooks:Z,staticGenerationBailout:m}=c,w="/api/todos/route"},7862:(e,t,r)=>{r.d(t,{Z:()=>n});var o=r(1634);let s=new o.s({url:process.env.KV_REST_API_URL,token:process.env.KV_REST_API_TOKEN}),n=s}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[997,634],()=>__webpack_exec__(2658));module.exports=r})();