"use strict";(()=>{var e={};e.id=760,e.ids=[760],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},9770:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>y,originalPathname:()=>Z,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>p,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>j});var n={};t.r(n),t.d(n,{GET:()=>GET,POST:()=>POST,PUT:()=>PUT,dynamic:()=>c});var o=t(884),s=t(6132),a=t(5798),i=t(7862);let c="force-dynamic",u="franky:memory",l=["MEMORY.md","SOUL.md","AGENTS.md","USER.md","FRANKY-RULES.md","HEARTBEAT.md"];async function GET(e){let{searchParams:r}=new URL(e.url),t=r.get("file");try{let e=await i.Z.get(u)||{};if(t){let r=e[t];if(r)return a.Z.json({file:t,content:r});return a.Z.json({file:t,content:`[File "${t}" not synced yet. Run sync from local machine.]`})}let r=Object.keys(e);if(0===r.length)return a.Z.json({files:l,note:"No files synced yet. Memory files need to be pushed from local machine."});return a.Z.json({files:r})}catch(e){return console.error("Redis error:",e),a.Z.json({files:l,error:"Redis error"})}}async function POST(e){try{let r=await e.json(),t=await i.Z.get(u)||{};if(r.files&&"object"==typeof r.files){for(let[e,n]of Object.entries(r.files))t[e]=n;return await i.Z.set(u,t),a.Z.json({success:!0,synced:Object.keys(r.files)})}if(r.file&&r.content)return t[r.file]=r.content,await i.Z.set(u,t),a.Z.json({success:!0,synced:[r.file]});return a.Z.json({error:"Invalid request. Send {file, content} or {files: {name: content}}"},{status:400})}catch(e){return console.error("Redis error:",e),a.Z.json({error:e.message},{status:500})}}async function PUT(e){try{let{file:r,content:t}=await e.json();if(!r||void 0===t)return a.Z.json({error:"file and content required"},{status:400});let n=await i.Z.get(u)||{};return n[r]=t,await i.Z.set(u,n),a.Z.json({success:!0,updated:r})}catch(e){return console.error("Redis error:",e),a.Z.json({error:e.message},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/memory/route",pathname:"/api/memory",filename:"route",bundlePath:"app/api/memory/route"},resolvedPagePath:"/Users/Killmunger/clawd/apps/agent-monitor/app/api/memory/route.js",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:p,headerHooks:y,staticGenerationBailout:j}=d,Z="/api/memory/route"},7862:(e,r,t)=>{t.d(r,{Z:()=>s});var n=t(1634);let o=new n.s({url:process.env.KV_REST_API_URL,token:process.env.KV_REST_API_TOKEN}),s=o}};var r=require("../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[997,634],()=>__webpack_exec__(9770));module.exports=t})();